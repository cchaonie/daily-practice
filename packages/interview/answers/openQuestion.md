### Q1：你有哪些缺点

1. 不擅长在人多的场合发表讲话。碰到这种情况，我都尽可能提前做好准备，把自己要说的内容做好提纲，尽可能记住概要。
2. 急性子，这个存在两个方面，对别人和对自己。我的改进措施是：
    1. 对自己要做的事情，尽可能想清楚细节，避免遗漏
    2. 对希望别人做的事情，我会尽可能换位思考，为什么会别人没有马上去做

### Q2：你有哪些优点

1. 适合团队合作，主动承担。我会关注到团队可能忽视的地方，如每日监控任务。本来监控任务是每个人每天领取一个做的，但是我一般都会在下班时间检查一次是不是又漏掉的，有的话我会自己去领，确保监控任务每天都有更新
2. 不责备、不埋怨。面对同事工作之中的错误情况，我能做到对事不对人，我坚信每个人对自己的错误都能有意识并且会主动改正。之前有一个模块代码写的不好，我自己抽空重构了一下，然后找那个同事讨论，与他一起分析重构后的方案。而不是指责这里代码不好，很难维护、经常出 bug。

### Q3：你有哪些兴趣爱好

1. 看电影。看电影是一种很好地解压方式，所以我喜欢看简单粗暴的科幻电影、动作大片。（复仇者联盟、金刚大战哥斯拉等）
2. 看书。看书是我学习的一种很重要的方式。最近在看《深入浅出 nodejs》，因为前段时间刚好做了 OOM 的任务

### Q4：职业生涯规划是什么

我的职业目标是十年之内成为 web 技术专家。目前来说，深度还不够，我总结了一下，主要原因有两个：

1. 工作前期在于快速进入这个职业，需要有相对较广的视野，对于深度可能稍显不够
2. web 领域尤其是前端，在这几年发展迅猛，技术的更新迭代很快，需要了解掌握的东西太多

针对我目前的现状，接下来我会有所调整。一方面，我选择深入研究 react 和 node 这两个技术，彻底弄懂其设计原理，实现细节，从而以点带面，完成自身的突破。今年的一个目标就是成为 react 的 contributor。另一方面，我需要在团队中建立自己的影响力，目前来说有两个途径，code review 和技术分享，这也是我目前在做的。

### Q5：你有哪些问题

1. 团队的组成情况
2. 接下来三个月到半年内的工作内容
3. 如果有幸加入的话，对我的期待是什么
4. 工作地点、时间
5. 福利待遇
6. 职级调薪
7. 工资构成、股票期权

### Q6：你在项目中碰到的最难/印象最深的问题

#### 线上 OOM

通过 grafana 看板我们发现了 OOM 的问题。我首先想到的是根据线上 dump 文件看内存快照，但是问了 Travix 的人才知道线上并没有埋收集 dump 的代码，因此无法拿到 dump 文件。这样一来，我只能本地获取 dump 文件。

最初的猜测是 QPS 上升导致内存上涨。我的做法是本地启动项目之后，通过 ab 工具进行压测，通过不同 qps 下的 dump 文件，想找到是什么对象的内存无法释放。但是对比后发现，其实在不同 qps 下内存消耗变化并不显著，因此排除了是 qps 上升导致的 OOM。

而后我再自己看了当时的内存的增长情况，发现其实内存消耗并不是线性缓慢增长，而是呈阶梯状上升，于是我的猜测是内存上涨是某个动作触发的。而且刚好我再熟悉代码的时候，看到了一些使用应用内存做缓存的操作，于是就去分析了那块的代码，最终定位到三处类似的缓存操作，分别是缓存内容页 JSON 数据的 response 和两次的多语言数据的映射数据。后者是以多语言数据版本号作为 key 进行缓存的。

为了验证猜想，我对比了 labels 发布时间和看板里内存增长的时间，发现二者之间确实是吻合的。更进一步，我再测试环境尝试发布一次多语言数据，然后看能否复现这个问题，结果证明猜想是正确的。

接下来是修复问题。将缓存每个版本改为仅缓存最新版本，同时对 response 的缓存也做了改进，支持传入是否缓存的配置项。但这都是应用内的逻辑改进，我向 Travix 那边提了建议：

1. 增加代码里 dump 的收集功能
2. 是否可以尝试将应用内缓存使用应用外缓存如 Redis 等工具替换

#### 改签人程选择

无论是改签还是退票，人程选择模块一直是 bug 频繁的点。一方面，业务逻辑本身很复杂，既包括订单本身的退改状态和订单类型，又要考虑行程的状态；多个乘客之间的人程联动关系也需要纳入考虑。除了人程选择，不同选择还需要于页面展示不同的提示话术。

在原有过程式代码的基础上，我加上了一些业务对象，将不同的逻辑封装在不同的对象内部，重构了这个模块。总的逻辑抽象成：

1. 创建不同类型订单
2. 勾选/取消订单里的某人某程
3. 当前人的所有行程联动
4. 不同人的行程联动

提测后这个模块基本上没有再出什么问题，线上也比较稳定。后续功能增加时的维护工作难度也降低很多。

### graphql 客户端

1. 在什么情况下要接 graphQL？接口字段越来越庞大，但是前端做 ajax 其实并不需要额外字段，造成浪费，因此接入 graphql 来提高性能
2. 效果如何？响应大小减少了 60%
3. 详细描述一下 graphql 客户端做了什么
   本质上来说，graphql 定义了一个特殊的契约语法，最终通过一个固定的 endpoint 来进行 HTTP 交互，因此，客户端的事情就是： 1. 解析 graphql 的语法 2. 发送请求时带上请求参数

### 接入 cucumber

开发了一个基于 Puppeteer 和 cucumber 的使用自然语言书写自动化测试的库。这个库主要做的事情是两个：

1. 解析自然语言，从而调用 cucumberAPI
2. 根据解析出来的操作，使用 puppeteerAPI 操作页面



### Q7关注前端什么方向

微前端跟后端的微服务有点像，就是将一个大的前端应用，拆分成多个可独立开发测试部署的小的应用。

总结来说，就是解耦。从开发团队的人员，到代码仓库、技术栈，通过实践微前端，都可以解耦。但是与后端微服务有个重大的差别，就是前端最终的产物还是 HTML CSS 和 JS，即最终这些东西还是要聚合到一起的。所以一般来说，微前端至少需要考虑两个问题：

1. 不同应用之间的通信
2. 如何管理多个应用，加载、更新、卸载等等

根据聚合的方式不同，微前端的实现也不太一样。

1. 最简单的方式，可以用 iframe 来实现聚合，通过 message 来进行通信
2. 通过 HTTP 服务的路由来重定向到不同的应用，即从应用内组件之间的调用变成应用之间的调用。这种方式一般用来进行新应用替代老应用的中间过程
3. 其他框架，如 single-spa。设计一套路由机制，加载不同的应用，应用需要实现框架要求的生命周期函数。
    1. root config
    2. application
        1. registerApplication
        2. implement lifecycle methods
