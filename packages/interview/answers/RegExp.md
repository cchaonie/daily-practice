# Regular Expression

## 部分 ASCII 值的范围字符 ASCII 值

| 字符 | 码值范围 |
| :--: | :------: |
| 0-9  |  48~57   |
| a-z  |  97~122  |
| A-Z  |  65~90   |

**数字和字母都只会匹配其本身：0-9 A-Z a-z**

## 正则表达式中的特殊字符

| 字符     | 含义                                                                                                      |
| -------- | --------------------------------------------------------------------------------------------------------- |
| ^        | 1. 字符集合取反。\[^abc\]表示匹配一个不是 abc 的字符。 2. 匹配字符串的开头                                |
| $        | 匹配字符串的结尾                                                                                          |
| .        | 匹配除换行符之外的任意字符。使用`s`则可以匹配换行符                                                       |
| \*       | 匹配某字符任意次                                                                                          |
| +        | 匹配某字符至少一次                                                                                        |
| ?        | 匹配某字符一次或者 0 次。如果在量词后面，则表示量词将使用**非贪婪**模式，默认是贪婪模式，会尽可能多得匹配 |
| 竖线(\|) | 分隔字符组                                                                                                |
| \\       | 转义字符                                                                                                  |
| /        | 表示正则表达式直接量的开始与结束                                                                          |
| ()       | 捕获组                                                                                                    |
| []       | 字符集合，匹配单个字符                                                                                    |
| {}       | 表示匹配次数                                                                                              |

## 字符组（Charater class）

1. 将直接量字符单独放进方括号，即[]，就组成了字符组（character class）。如[abc]可以用来匹配包含 a 或 b 或 c 的字符串
2. 字符组([])中的横杠(-)，表示字符的 ASCII 值的范围。如使用[0-9A-Za-z]匹配所有的数字和大小写字母
3. 使用反斜杠 \加字母 可以表示常用的字符类。如使用 \s 匹配所有 unicode 的“空字符”（空格，制表符等），\S 与 \s 相反
4. 有的字符出现在字符组中会表示不同的含义：
5. 字符组中第一个 ^ ，表示对字符组取反。如[^abc]可以用来匹配不包含 a、b、c 的字符；而在字符组外的 ^ 匹配起始位置
6. 在字符组中，点 `.` 和 `*`失去特殊含义
7. 在字符组中，[\b]匹配一个退格键（backspace）；在非字符组中，\b 匹配一个字符边界

## 匹配次数（Quantifiers）

1. 一个字符组只会匹配一次，因此有匹配次数的语法

## 分组和反向引用（grouping and back reference）

1. 使用圆括号可以捕获匹配项，并在后续使用匹配的内容
1. /(fo+)\1/匹配 fo+ ，然后使用 \1 来引用 fo+匹配的内容。如可以成功匹配 fooofooo。
1. 使用(?:x)来不捕获匹配项

## 断言（Assertion）

| 模式    | 作用                |
| ------- | ------------------- |
| (x)     | 捕获匹配的 x        |
| (?:x)   | 不捕获匹配的 x      |
| x(?=y)  | 匹配有后缀 y 的 x   |
| x(?!y)  | 匹配后缀不是 y 的 x |
| (?<=y)x | 匹配有前缀 y 的 x   |
| (?<!y)x | 匹配前缀不是 y 的 x |

## 标志

| 标志 | 作用                           |
| ---- | ------------------------------ |
| g    | 全局搜索                       |
| i    | 不区分大小写                   |
| m    | 多行搜索                       |
| s    | 允许`.`匹配换行符              |
| u    | 使用 Unicode 码的模式匹配      |
| y    | 匹配从目标字符串的当前位置开始 |

## JS 中正则相关的方法

### 构造正则表达式

```js
// 1. 直接量
const pattern == /[a-z]*/;
// 2. RegExp构造函数
new RegExp('ab+c', 'i');
new RegExp(/ab+c/, 'i');
```

### 正则表达式的实例方法

1. exec(str: string): null | Array. 返回的数组中有以下属性：
1. index: 匹配起始位置
1. input: 匹配的字符串
1. 数组第一个元素是匹配的内容，剩余元素则是捕获项
1. test(str:string): boolean

### 字符串中可以使用正则的方法

| 方法名称 | 作用                                                                                                              | 返回值               |
| -------- | ----------------------------------------------------------------------------------------------------------------- | -------------------- |
| match    | 查找所有匹配的字符串                                                                                              | 匹配结果数组 or null |
| matchAll | 查找所有匹配结果及其捕获组                                                                                        | 迭代器               |
| search   | 查找匹配的字符串                                                                                                  | 下标 or -1           |
| replace  | 第二个参数是待替换字符串(可用$1, $2 代替匹配项)或者替换函数，替换函数的入参为(match, ...匹配项, offset, 原字符串) | replace 后的字符串   |
| split    | 根据匹配的分隔符分割字符串                                                                                        | 数组                 |
